{% extends 'interviews/base.html' %}

{% block content %}

<div class="page-header">
    <h2>Select Interview Options</h2>
    <p>Customize your interview experience and get started</p>
</div>

<div class="card" style="max-width: 700px; margin: 0 auto;">
    <form method="GET" action="{% url 'start_interview' %}" id="interviewForm">

        <div style="margin-bottom: 30px;">
            <label for="role">
                <span style="font-size: 18px;">ğŸ‘”</span> Select Role
            </label>
            <select id="role" name="role" required>
                <option value="">Choose your role...</option>
                <option value="backend">ğŸ’» Backend Developer</option>
                <option value="frontend">ğŸ¨ Frontend Developer</option>
                <option value="data">ğŸ“Š Data Analyst</option>
                <option value="devops">âš™ï¸ DevOps Engineer</option>
                <option value="fullstack">ğŸš€ Full Stack Developer</option>
            </select>
        </div>

        <div style="margin-bottom: 30px;">
            <label for="tech_stack">
                <span style="font-size: 18px;">ğŸ› ï¸</span> Select Specialization
            </label>
            <select id="tech_stack" name="tech_stack" required disabled>
                <option value="">Select a role first...</option>
            </select>
            <p style="font-size: 13px; color: #718096; margin-top: 8px; font-style: italic;">
                Choose a role to see available specializations
            </p>
        </div>

        <div style="margin-bottom: 30px;">
            <label for="difficulty">
                <span style="font-size: 18px;">ğŸ“ˆ</span> Select Difficulty
            </label>
            <select id="difficulty" name="difficulty" required>
                <option value="">Choose difficulty level...</option>
                <option value="easy">ğŸŸ¢ Easy - Fundamental concepts</option>
                <option value="medium">ğŸŸ¡ Medium - Intermediate knowledge</option>
                <option value="hard">ğŸ”´ Hard - Advanced expertise</option>
            </select>
        </div>

        <div style="background: #f7fafc; padding: 20px; border-radius: 10px; margin-bottom: 30px; border-left: 4px solid #667eea;">
            <h4 style="margin-bottom: 10px; color: #2d3748; font-size: 16px;">ğŸ“‹ Interview Details</h4>
            <ul style="list-style: none; color: #4a5568; line-height: 1.8;">
                <li>âœ“ 5-7 questions based on your selection</li>
                <li>âœ“ AI-powered evaluation and feedback</li>
                <li>âœ“ Detailed performance analytics</li>
                <li>âœ“ Instant results and recommendations</li>
            </ul>
        </div>

        <div style="text-align: center;">
            <button type="submit" id="startBtn" style="padding: 15px 50px; font-size: 16px;">
                Start Interview
            </button>
        </div>

    </form>
</div>

<style>
    select option {
        padding: 10px;
    }

    select:disabled {
        cursor: not-allowed;
        opacity: 0.6;
    }

    #startBtn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .form-group-animated {
        animation: slideIn 0.5s ease;
    }

    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateX(-20px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }
</style>

<script>

const techOptions = {
    backend: [
        { value: "django", label: "ğŸ Django" },
        { value: "nodejs", label: "ğŸŸ¢ Node.js" },
        { value: "springboot", label: "ğŸƒ Spring Boot" }
    ],
    frontend: [
        { value: "react", label: "âš›ï¸ React" },
        { value: "angular", label: "ğŸ…°ï¸ Angular" },
        { value: "vue", label: "ğŸ’š Vue.js" }
    ],
    data: [
        { value: "python", label: "ğŸ Python (Data Analysis)" },
        { value: "sql", label: "ğŸ“Š SQL" }
    ],
    devops: [
        { value: "aws", label: "â˜ï¸ AWS" },
        { value: "docker", label: "ğŸ³ Docker" }
    ],
    fullstack: [
        { value: "python-react", label: "ğŸ Python + React" },
        { value: "java-angular", label: "â˜• Java + Angular" }
    ]
};

const roleSelect = document.getElementById("role");
const techSelect = document.getElementById("tech_stack");

roleSelect.addEventListener("change", function () {
    const role = this.value;
    
    // Clear and enable tech dropdown
    techSelect.innerHTML = "";
    techSelect.disabled = false;
    
    // Add placeholder
    const placeholderOption = document.createElement("option");
    placeholderOption.value = "";
    placeholderOption.text = "Choose your specialization...";
    techSelect.appendChild(placeholderOption);

    if (techOptions[role]) {
        techOptions[role].forEach(function (tech) {
            let option = document.createElement("option");
            option.value = tech.value;
            option.text = tech.label;
            techSelect.appendChild(option);
        });
        
        // Add animation
        techSelect.parentElement.classList.add('form-group-animated');
    } else {
        techSelect.disabled = true;
    }
});

// Form validation
document.getElementById('interviewForm').addEventListener('submit', function(e) {
    const role = document.getElementById('role').value;
    const tech = document.getElementById('tech_stack').value;
    const difficulty = document.getElementById('difficulty').value;
    
    if (!role || !tech || !difficulty) {
        e.preventDefault();
        alert('Please fill in all fields before starting the interview.');
    }
});

</script>

{% endblock %}